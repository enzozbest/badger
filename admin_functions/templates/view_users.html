{% extends 'base_content.html' %}
{% block content %}
<div class="container mt-5">
    <h1 class="display-5 text-white">
        Registered Users 
    </h1>

    <!-- Filter Form -->
    <form method="get" class="bg-dark text-white p-3 rounded mb-4">
        <p class="text-white">Showing {{ count }} out of {{ total }} users:</p>
    
        <div class="mb-3">
            <a href="{% url 'admin_dash' %}" class="btn-outline-success">Go to the Administrator Dashboard</a>
        </div>

        {{ filter.form.as_p }}
        <button type="submit" class="btn btn-outline-light btn-sm">Filter</button>
    </form>

    <!-- Users Table -->
    <table class="table table-dark table-striped table-hover mt-3">
        <thead>
            <tr>
                <th scope="col">Email Address</th>
                <th scope="col">First Name</th>
                <th scope="col">Last Name</th>
                <th scope="col">Account Type</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for user in page_obj %}
                <tr>
                    <td>{{ user.email|lower }}</td>
                    <td>{{ user.first_name }}</td>
                    <td>{{ user.last_name }}</td>
                    <td>{{ user.user_type }}</td>
                    <td>
                        {% if user.user_type != "Admin" %}
                            <a href="{% url 'make_admin' user.id %}" class="btn btn-primary btn-sm">Make Administrator</a>
                        {% endif %}
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="5" class="text-center text-muted">No users registered.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <!-- Include Paginator Partial -->
    {% include 'partials/_pagination.html' %}
</div>
{% endblock %}
